<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://unpkg.com/boxicons@2.0.9/css/boxicons.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/boxicons@latest/css/boxicons.min.css">
    <link rel="stylesheet" href="style.css">
    <title>Document</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/boxicons@latest/css/boxicons.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&amp;display=swap" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/datatables.min.css">
    <link href="https://unpkg.com/boxicons@2.0.9/css/boxicons.min.css" rel="stylesheet">
<link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>

	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.4/xlsx.full.min.js"></script>

    <style>

@import url("https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&display=swap");
:root{--header-height: 3rem;
    --nav-width: 68px;
    --first-color: #4723D9;
    --first-color-light: #AFA5D9;
    --white-color: #F7F6FB;
    --body-font: 'Nunito',
     sans-serif;--normal-font-size: 1rem;--z-fixed: 100}*,
     ::before,::after{box-sizing: border-box}body{position: relative;
        margin: var(--header-height) 0 0 0;
        padding: 0 1rem;
        font-family: var(--body-font);
        font-size: var(--normal-font-size);
        transition: .5s}a{text-decoration: none}.header{width: 100%;
            height: var(--header-height);
            position: fixed;
            top: 0;
            left: 0;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 1rem;
            background-color: white;
            z-index: var(--z-fixed);
            transition: .5s}.header_toggle{color:#1693A5;
                font-size: 1.5rem;
                cursor: pointer}.header_img{width: 35px;
                    height: 35px;
                    display: flex;
                    justify-content: center;
                    border-radius: 50%;
                    overflow: hidden}.header_img img{width: 40px}.l-navbar{position: fixed;
                        top: 0;
                        left: -30%;
                        width: var(--nav-width);
                        height: 100vh;
                        background-color: #1693A5;
                        padding: .5rem 1rem 0 0;
                        transition: .5s;
                        z-index: var(--z-fixed)}.nav{height: 100%;display: 
                            flex;flex-direction: column;
                            justify-content: space-between;
                            overflow: hidden}.nav_logo, 
                            .nav_link{display: grid;grid-template-columns: max-content max-content;
                align-items: center;column-gap: 1rem;
                padding: .5rem 0 .5rem 1.5rem}.nav_logo{margin-bottom: 2rem}.nav_logo-icon{font-size: 1.25rem;
                    color: var(--white-color)}.nav_logo-name{color: var(--white-color);font-weight: 700}.nav_link{position: relative;
                        color: first-color;
                        margin-bottom: 1.5rem;
                        transition: .3s}.nav_link:hover{color: var(--white-color)}.nav_icon{font-size: 1.25rem}.show{left: 0}.body-pd{padding-left: calc(var(--nav-width) + 1rem)}.active{color: var(--white-color)}.active::before{content: '';
                        position: absolute;
                        left: 0;
                        width: 2px;
                        height: 32px;
                        background-color: var(--white-color)}.height-100{height:100vh}
                        @media screen and (min-width: 768px){body{margin: calc(var(--header-height) + 1rem) 0 0 0;
          padding-left: calc(var(--nav-width) + 2rem)}.header{height: calc(var(--header-height) + 1rem);
             padding: 0 2rem 0 calc(var(--nav-width) + 2rem)}
             .header_img{width: 120px;
                height: auto}.header_img img{width: 120px ;height:auto ;
    border-radius: 0;}.l-navbar{left: 0;padding: 1rem 1rem 0 0}.show{width: calc(var(--nav-width) + 156px)}.body-pd{padding-left: calc(var(--nav-width) + 188px)}}

                #content main {
    background-color: white;
	width: 100%;
	
	font-family: var(--poppins);
	max-height: calc(100vh - 56px);
	overflow-y: auto;
}
#content main .head-title {
	display: flex;
	align-items: center;
	justify-content: space-between;
	grid-gap: 16px;
	flex-wrap: wrap;
    margin-top: 20px;
}
#content main .head-title .left h1 {
	font-size: 36px;
    font-family: 'Avenir';
	font-weight: 600;
	margin-bottom: 10px;
	color: var(--dark);
}
#content main .head-title .left .breadcrumb {
	display: flex;
	align-items: center;
	grid-gap: 16px;
}
#content main .head-title .left .breadcrumb li {
	color: var(--dark);
}
#content main .head-title .left .breadcrumb li a {
	color: var(--dark-grey);
	pointer-events: none;
}
#content main .head-title .left .breadcrumb li a.active {
	color: var(--blue);
	pointer-events: unset;
}
.tabs {
    margin-top: 20px;
    display: flex;
}

.tab {
    padding: 10px 20px;
    margin-right: 10px;
    background-color: #000c06;
    color: #f5f3f3;
    border: none;
    border-radius: 5px;
    cursor: pointer;
}

.tab:hover {
    background-color: #07070754;
};

.tab-content {
    display: none;
}


#content main .box-info {
	display: grid;
	grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
	grid-gap: 90px;
	margin-top: 25px;
display: flex;

}
#content main .box-info li {
	width:20%;
	padding: 24px;
	background: lightblue ;
	border-radius: 20px;
	display: flex;
	align-items: center;
	grid-gap: 25px;
}
#content main .box-info li .bx {
	width: 80px;
	height: 50px;
	border-radius: 10px;
	font-size: 36;
	display: flex;
	box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);

justify-content: center;
	align-items: center;

}

#content main .box-info li:nth-child(1) .bx {
	background: var(--light-blue);
	color: var(--blue);
}
#content main .box-info li:nth-child(2) .bx {
	background: var(--light-yellow);
	color: var(--yellow);
}
#content main .box-info li:nth-child(3) .bx {
	background: var(--light-orange);
	color: var(--orange);
}
#content main .box-info li .text h3 {
	font-size: 24px;
	font-weight: 600;
	color: var(--dark);
}
#content main .box-info li .text p {
	color: var(--dark);	
}

#content main .box-info li:nth-child(3) .bx {
	background: var(--light-blue);
	color: var(--blue);
}
#content main .box-info li .text h3 {
	font-size: 24px;
	font-weight: 600;
	color: var(--dark);
}
#content main .box-info li .text p {
	color: var(--dark);	
}

                



@media screen and (max-width: 768px) {
	#sidebar {
		width: 200px;
	}

}

</style>


</head>




<body id="body-pd">
    <header class="header" id="header">
        <div class="header_toggle"> <i class='bx bx-menu' id="header-toggle"></i> </div>
          <img src="/images/logo.png" alt="Logo" class="logo" width="150px">
    
    </header>
    <div class="l-navbar" id="nav-bar">
        <nav class="nav">
            <div> <a href="#" class="nav_logo">
                 <i class='bx bx-layer nav_logo-icon'></i> 
                 <span class="nav_logo-name">Admin Hub</span> </a>
                <div class="nav_list">
                    <a href="#" class="nav_logo">
                        <i class='bx bx-layer nav_logo-icon'></i> 
                        <span class="nav_logo-name">Welcome Admin!</span> </a>
            <a href="/home" class="nav_link clickable-icon active">
                    <i class='bx bx-grid-alt nav_icon'></i>
                     
                     <span class="nav_name">Dashboard</span>
                     </a> 
                     
                     <a href="/programtable" class="nav_link clickable-icon active">
                         <i class='bx bx-user nav_icon'></i> 
                           <span class="nav_name">Program Details</Details></span> </a>


<a href="/adminlogin" id="logoutBtn" class="nav_link">
    <i class='bx bx-log-out nav_icon'></i>
    <span class="nav_name">Logout</span>
</a>



        </nav>
    </div>

    <section id="content">
        <main>
    <!--Container Main start-->

        <div class="head-title">
            <div class="left">
                <h1>Scholar Directory</h1>
                <ul class="breadcrumb">
                    <li>
                        <a href="#">Scholar Directory</a>
                    </li>
                    <li><i class="bx bx-chevron-right"></i></li>
                    <li>
                        <a class="active" href="#">Home</a>
                    </li>
                </ul>
            </div>
            <ul class="box-info">
                  
                <li>
                    
                    <i class="bx bxs-calendar-check"></i>
                     <span class="text">
                    <p>Academic Year</p>
                    <select class="dropdown" id="academic-year"  onchange="filterStudents()">
                        <option value="">Select Academic Year </option>
                        <option value="2020-2021">2015-2016</option>
                        <option value="2020-2021">2016-2017</option>
                        <option value="2020-2021">2017-2018</option>
                        <option value="2020-2021">2019-2020</option>
                         <option value="2020-2021">2020-2021</option>
                        <option value="2021-2022">2021-2022</option>
                        <option value="2022-2023">2022-2023</option>
                        <option value="2023-2024">2023-2024</option>
                    </select>
                </li>
                
                <li>
                    <i class="bx bxs-group"></i>
                    <span class="text">
                        <p>School Program</p>
                        <select class="dropdown" id="program-name"  onchange="filterStudents()">
                            <option value="">Select Program Name</option>
                            <option value="PhD (Chemistry)">PhD (Chemistry)</option>
                            <option value="PhD (Biotechnology)">PhD (Biotechnology)</option>
                            <option value="PhD (Management)">PhD (Management)</option>
                            <option value="PhD (Geo Sciences)">PhD (Geo Sciences)</option>
                            <option value="PhD (Physics)">PhD (Physics)</option>
                            <option value="PhD Engineering">PhD Engineering</option>
                            <option value="PhD Electronics and Communication Engg.">PhD Electronics and Communication Engg.</option>
                            <option value="PhD (Law)">PhD (Law)</option>
                            <option value="PhD (Microbiology)">PhD (Microbiology)</option>
                            <option value="PhD Pharmaceutical Sciences">PhD Pharmaceutical Sciences</option>
                            <option value="PhD (Food &amp; Nutrition Sciences)">PhD (Food &amp; Nutrition Sciences)</option>
                            <option value="PhD (Design)">PhD (Design)</option>
                            <option value="PhD (Petroleum Engineering)">PhD (Petroleum Engineering)</option>
                            <option value="PhD Safety Engineering">PhD Safety Engineering</option>
                            <option value="PhD (Mechanical Engineering)">PhD (Mechanical Engineering)</option>
                            <option value="PhD (Civil Engineering)">PhD (Civil Engineering)</option>
                            <option value="PhD (Computer Science Engineering)">PhD (Computer Science Engineering)</option>
                            <option value="Phd (Renewable Engineering)">Phd (Renewable Engineering)</option>
                            <option value="PhD (Economics and International Business)">PhD (Economics and International Business)</option>
                            <option value="PhD (Mathematics)">PhD (Mathematics)</option>
                            <option value="PhD Communication">PhD Communication</option>
                            <option value="PhD (Liberal Studies)">PhD (Liberal Studies)</option>
                            <option value="PhD Safety Engineering">PhD Safety Engineering</option>
                            <option value="Phd (Aerospace Engineering)">Phd (Aerospace Engineering)</option>
                           
                        </select>
                    </span>
                </li>
       
                <!--</ul>
                <ul class="box-info">--->
                <li>
                    <i class="bx bxs-school"></i>
                    <span class="text">
                        <p> Select School</p>
                        <select class="dropdown" id="school-name"  onchange="filterStudents()">
                            <option value="">Select School Name</option>
                            <option value="School of  Advanced Engineering">School of  Advanced Engineering</option>
                            <option value="School of Health Sciences &amp; Technology">School of Health Sciences &amp; Technology</option>
                            <option value="School of law">School of law</option>
                            <option value="School of Business">School of Business</option>
                            <option value="School of  Advanced Engineering">School of  Advanced Engineering</option>
                            <option value="School of Health Sciences">School of Health Sciences</option>
                            <option value="School of Design">School of Design</option>
                            <option value="School of Business">School of Business</option>
                            <option value="School of Computer Science">School of Computer Science</option>
                            <option value="School of Liberal Studies ( Modern Media)">School of Liberal Studies ( Modern Media)</option>
                                                      </select>
                    </span>
                </li>
  
      
            </ul>
</div></main></section>
    </div>

         
    <div class="container">
        <div class="row"> 
             <div class="col-10">
                <div class="data_table">
             <div id="example_wrapper" class="dataTables_wrapper dt-bootstrap5 no-footer"> 
                          <div class="row">  
                         <div class="col-sm-12 col-md-6"> 
{{!--                                
                        <div class="dt-buttons btn-group flex-wrap">       
     <button class="btn btn-secondary buttons-Excel buttons-html5" tabindex="0" aria-controls="example" type="button">
        <span>Excel</span>
    </button> 
   
    <button class="btn btn-secondary buttons-pdf buttons-html5" tabindex="0" aria-controls="example" type="button">
        <span>PDF</span>
    </button>
     <button class="btn btn-secondary buttons-print" tabindex="0" aria-controls="example" type="button">
        <span>Print</span></button>
     </div>
    </div> --}}
</div> 

{{!-- <div class="dataTables_length" id="example_length">
    <label>Show 
        <select name="example_length" aria-controls="example" class="form-select form-select-sm">
            <option value="10">10</option>
            <option value="25">25</option>
            <option value="50">50</option>
            <option value="100">100</option>
        </select> entries
    </label>
</div> --}}

<div class="row">
    <div class="col-sm-12">
        
    <div id="example_wrapper" class="dataTables_wrapper dt-bootstrap5 no-footer">
        <div class="row">
<div class="col-sm-12 col-md-6">
    <div class="dataTables_length" id="example_length">

    </div>
</div>
<div class="col-sm-12 col-md-6">

</div>
</div>
  <div class="row">
    <div class="col-sm-12">
    <table id="example" class="table table-striped table-bordered dataTable no-footer" aria-describedby="example_info">

        <thead class="table-dark">
            <th style="width: 50px;">S1.no</th>
            <th style="width: 120px;">Student Id</th>
            <th style="width: 150px;">Name</th>
           <th style="width: 180px;">School Name</th>
            <th style="width: 180px;">Program Name</th>
            <th style="width: 120px;">Academic Year</th>
            <th style="width: 100px;">Status</th>
            <th style="width: 100px;">Action</th>
          
          
        </thead>
        <tbody id="user-table">
            <!-- <tr class="odd">
                <td class="sorting_1">1</td>
                <td>12345</td>
                <td>Isha</td>
                <td class="active">Active</td>
                <td class="action-cell">
                    <button class="edit-btn">Edit<button>
                    </button>
                </button>
            </td>
        </tr>
        <tr class="even">
            <td class="sorting_1">2</td>
            <td>123345</td>
            <td>Aarti</td>
            <td class="inactive">Inactive</td>
            <td class="action-cell">
                <button class="edit-btn">Edit<button>

                </button> -->
       
</tbody>
    </table>
</div>
</div>

<div class="row">
<div class="col-sm-12 col-md-5">
   <!-----     <div class="dataTables_info" id="example_info" role="status" aria-live="polite">Showing 1 to 2 of 2 entries</div>
    </div>
    <div class="col-sm-12 col-md-7">
        <div class="dataTables_paginate paging_simple_numbers" id="example_paginate">
            <ul class="pagination">
                <li class="paginate_button page-item previous disabled" id="example_previous">
                    <a href="#" aria-controls="example" data-dt-idx="0" tabindex="0" class="page-link">Previous</a>
                </li>
                <li class="paginate_button page-item active">
                    <a href="#" aria-controls="example" data-dt-idx="1" tabindex="0" class="page-link">1</a>
                </li>
                <li class="paginate_button page-item next disabled" id="example_next">
                    <a href="#" aria-controls="example" data-dt-idx="2" tabindex="0" class="page-link">Next</a>
                </li>
            </ul>
        </div>
    </div>--->
</div>
</div>
  </div>
   </div>
   </div>
    </div>
 </div>
     </div>
    </div></section>

<script src="assets/js/bootstrap.bundle.min.js"></script>
<script src="assets/js/jquery-3.6.0.min.js"></script>
<script src="assets/js/datatables.min.js"></script>
<script src="assets/js/pdfmake.min.js"></script>
<script src="assets/js/vfs_fonts.js"></script>
<script src="assets/js/custom.js"></script>

    <!--Container Main end-->

    <script>
        document.addEventListener("DOMContentLoaded", function(event) {
   
   const showNavbar = (toggleId, navId, bodyId, headerId) =>{
   const toggle = document.getElementById(toggleId),
   nav = document.getElementById(navId),
   bodypd = document.getElementById(bodyId),
   headerpd = document.getElementById(headerId)
   
   // Validate that all variables exist
   if(toggle && nav && bodypd && headerpd){
   toggle.addEventListener('click', ()=>{
   // show navbar
   nav.classList.toggle('show')
   // change icon
   toggle.classList.toggle('bx-x')
   // add padding to body
   bodypd.classList.toggle('body-pd')
   // add padding to header
   headerpd.classList.toggle('body-pd')
   })
   }
   }
   
   showNavbar('header-toggle','nav-bar','body-pd','header')
   
   /*===== LINK ACTIVE =====*/
   const linkColor = document.querySelectorAll('.nav_link')
   
   function colorLink(){
   if(linkColor){
   linkColor.forEach(l=> l.classList.remove('active'))
   this.classList.add('active')
   }
   }
   linkColor.forEach(l=> l.addEventListener('click', colorLink))
   
    // Your code to run since DOM is loaded and ready
   });
   async function filterStudents() {
    const programName = document.getElementById('program-name').value;
    const schoolName = document.getElementById('school-name').value;
   const academicYear = document.getElementById('academic-year').value;

    const response = await fetch(`/students?programName=${encodeURIComponent(programName)}&schoolName=${encodeURIComponent(schoolName)}&academicYear=${encodeURIComponent(academicYear)}`);
    const students = await response.json();
    console.log(students); 
   updateUserTable(students);
}

 function updateUserTable(students) {
    if ($.fn.DataTable.isDataTable('#example')) {
       $('#example').DataTable().clear().destroy();
   }

   $('#example').DataTable({
      data: students,
       columns: [
           { data: null, title: 'S1.no', render: (data, type, row, meta) => meta.row + 1 },
           { data: 'Studentid', title: 'Student Id' },
            { data: 'name', title: 'Name' },
           { data: 'schoolName', title: 'School Name' },
            { data: 'programName', title: 'Program Name' },
            { data: 'academicYear', title: 'Academic Year' },
           { data: 'active', title: 'Status', render: data => data ? 'Active' : 'Inactive' },
            
            { data: null, title: 'Action', render: (data, type, row) => `<div class="action-buttons">
        <button class="view-btn" id="viewbtnforrediraction" data-id="${row.Studentid}">view</button> 
         <button class="edit-btn" id="editbtnforrediraction" data-id="${row.Studentid}">Edit</button>
          
         </div>`}
  
    
       ],
       dom: 'Bfrtip',
      buttons: ['excel', 'pdf', 'print']
    });
}


$(document).on('click', '.view-btn', function() {
    const studentId = $(this).data('id');
    console.log('Student ID:', studentId);
   window.location.href = `/adminform?id=${studentId}&page='view'`;
});

$(document).on('click', '.edit-btn', function() {
    const studentId = $(this).data('id');
    console.log('Student ID:', studentId);
   window.location.href = `/adminform?id=${studentId}&page='edit'`;
});



 


const allSideMenu = document.querySelectorAll('#sidebar .side-menu.top li a');

allSideMenu.forEach(item => {
    const li = item.parentElement;
    item.addEventListener('click', function () {
        allSideMenu.forEach(i => {
            i.parentElement.classList.remove('active');
        });
        li.classList.add('active');
    });
});

const menuBar = document.querySelector('#content nav .bx.bx-menu');
const sidebar = document.getElementById('sidebar');

menuBar.addEventListener('click', function () {
    sidebar.classList.toggle('hide');
});

function openTab(tabName) {
    var i, tabContent, tabLinks;
    tabContent = document.getElementsByClassName("tab-content");
    for (i = 0; i < tabContent.length; i++) {
        tabContent[i].style.display = "none";
    }
    tabLinks = document.getElementsByClassName("tab");
    for (i = 0; i < tabLinks.length; i++) {
        tabLinks[i].classList.remove("active");
    }
    document.getElementById(tabName).style.display = "block";
    event.currentTarget.classList.add("active");
}

if (window.innerWidth < 768) {
    sidebar.classList.add('hide');
}


document.addEventListener('DOMContentLoaded', async function() {
    console.log('DOM fully loaded');
    
    const logoutBtn = document.querySelector('#logoutBtn');
    
    if (logoutBtn) {
        console.log('Logout button found');
        
        // Attach event listener
        logoutBtn.addEventListener('click', async function(event) {
            event.preventDefault();
            console.log('Logout button clicked');

            const confirmed = confirm("Are you sure you want to logout?");
            if (confirmed) {
                console.log('Logging out...');

                // Simulate async operation if necessary
                await new Promise(resolve => setTimeout(resolve, 100));  // Example async operation

                // Redirect to the main page
                window.location.href = '/mainpage';
            } else {
                console.log('Logout canceled');
            }
        });
    } else {
        console.log('Logout button not found');
    }
});
    </script>

</body>
</html>